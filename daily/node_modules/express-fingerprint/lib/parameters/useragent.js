'use strict';

var _useragent = require('useragent');

var _useragent2 = _interopRequireDefault(_useragent);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

module.exports = function (next) {
  const agent = _useragent2.default.parse(this.req.headers['user-agent']);
  next(null, {
    useragent: {
      browser: {
        family: agent.family,
        version: agent.major
      },
      device: {
        family: agent.device.family,
        version: agent.device.major
      },
      os: {
        family: agent.os.family,
        major: agent.os.major,
        minor: agent.os.minor
      }
    }
  });
};